(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{877:function(e,t,n){Promise.resolve().then(n.bind(n,3311))},3311:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r=n(7437),s=n(2265),i=n(7639),a=n(1899),o=n(6207),l=n(5002),c=n(7404),d=n(4013),u=n(1327),m=n(20),h=n(7414),x=n(2441),g=n(4338),p=n(2614),f=n(5330),y=n(4902),v=n(9832),j=n(7666),w=n(4255),Z=n(3253),S=n(8057),b=n(2400),T=n(1610);function k(e){let{prayer:t,onEdit:n,onSave:i,onPrint:o,onSaveToWord:l,onTTS:c,onSaveToPrayerList:g}=e,[p,f]=(0,s.useState)(!1),[k,C]=(0,s.useState)(t),[D,I]=(0,s.useState)(!1),[z,E]=(0,s.useState)(null),[P,A]=(0,s.useState)(-1),[L,B]=(0,s.useState)("web"),[O,R]=(0,s.useState)(!1),[W,N]=(0,s.useState)(!1),[_,K]=(0,s.useState)(null),M=(0,s.useRef)(null),q=(0,s.useRef)([]),[U,J]=(0,s.useState)(!1),[F,G]=(0,s.useState)([]),H=(0,s.useRef)(-1),$=(0,s.useRef)(!1),V=(0,s.useRef)([]),Y=(0,s.useRef)(null),Q=(0,s.useRef)(0),X=(0,s.useRef)(0);(0,s.useEffect)(()=>{C(t)},[t]),(0,s.useEffect)(()=>{{let e=window.speechSynthesis||window.webkitSpeechSynthesis;if(!e){console.error("이 브라우저는 Web Speech API를 지원하지 않습니다.");return}E(e);let t=()=>{let t=e.getVoices();console.log("사용 가능한 음성 ".concat(t.length,"개 로드됨")),G(t)};void 0!==e.onvoiceschanged&&(e.onvoiceschanged=t),t(),setTimeout(t,1e3);let n=setInterval(()=>{D&&!$.current&&e&&!e.speaking&&(console.log("SpeechSynthesis 자동 멈춤 감지"),H.current>=0&&H.current<V.current.length&&(console.log("중단된 위치에서 재시작 시도"),et(V.current,H.current)))},5e3);return()=>{e&&e.cancel(),clearInterval(n)}}},[]),(0,s.useEffect)(()=>{z&&(()=>{let e=z.getVoices();console.log("Available voices after TTS change:",e),G(e)})()},[L]),(0,s.useEffect)(()=>{let e=()=>{J(window.innerWidth<600)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let ee=e=>{let t=e.split(/\n\s*\n/),n=[];return t.forEach(e=>{let t=e.split(/([,.])/g).map(e=>e.trim()).filter(e=>e.length>0);for(let e=0;e<t.length;e+=2){let r=t[e],s=t[e+1]||"";n.push(r+s)}}),n},et=(e,t)=>{if(!z||t>=e.length){en();return}try{let n=new SpeechSynthesisUtterance(e[t]);if(Y.current=n,"web"===L){let e=F.find(e=>e.lang.includes("ko")&&e.name.includes("Neural"))||F.find(e=>e.lang.includes("ko"));e&&(n.voice=e)}n.lang="ko-KR",n.rate=1,n.pitch=1,n.volume=1,n.onstart=()=>{A(t),H.current=t,er()},n.onend=()=>{$.current||et(e,t+1)},n.onerror=n=>{console.error("TTS 오류:",n),X.current<3?(X.current++,setTimeout(()=>{et(e,t)},1e3)):en()},U?(z.cancel(),setTimeout(()=>{z.speak(n)},100)):z.speak(n)}catch(e){console.error("TTS 재생 중 오류:",e),en()}},en=()=>{z&&z.cancel(),I(!1),$.current=!1,H.current=-1,A(-1),Q.current=0,X.current=0,Y.current=null};(0,s.useEffect)(()=>{if(!z)return;let e=setInterval(()=>{if(!D||z.speaking||$.current||et(V.current,H.current),$.current){var e;Date.now()-(null!==(e=window.lastPauseTime)&&void 0!==e?e:0)>6e4&&en()}},15e3);return()=>clearInterval(e)},[D,z]),(0,s.useEffect)(()=>{$.current&&(window.lastPauseTime=Date.now())},[$.current]);let er=()=>{if(-1===P)return;let e=document.querySelector('[data-sentence-index="'.concat(P,'"]'));e&&e.scrollIntoView({behavior:"smooth",block:"center"})};(0,s.useEffect)(()=>{er()},[P]),(0,s.useEffect)(()=>{let e=()=>{if(z){if("hidden"===document.visibilityState){if(D){console.log("탭 전환 감지: 일시정지"),Q.current=Date.now();try{z.pause(),$.current=!0,I(!1)}catch(e){console.error("탭 전환 일시정지 오류:",e)}}}else"visible"===document.visibilityState&&$.current&&Date.now()-Q.current<3e4&&(console.log("탭 복귀 감지: 재생 복구 시도"),setTimeout(()=>{try{z.speaking?(console.log("복귀 후 재개"),z.resume(),$.current=!1):(console.log("복귀 후 재시작 필요: 현재 문장부터 재시작"),$.current=!1,et(V.current,H.current)),I(!0)}catch(e){console.error("탭 복귀 후 재개 오류:",e),$.current=!1,et(V.current,H.current),I(!0)}},300))}};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[D,z]);let es=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);M.current=t,q.current=[],t.ondataavailable=e=>{e.data.size>0&&q.current.push(e.data)},t.onstop=()=>{let e=new Blob(q.current,{type:"audio/wav"});K(e)},t.start(),N(!0)}catch(e){console.error("녹음 시작 실패:",e),alert("녹음을 시작할 수 없습니다. 마이크 권한을 확인해주세요.")}};return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(a.Z,{sx:{mt:2,mb:3,height:{xs:"300px",sm:"400px",md:"500px"},transition:"height 0.3s ease-in-out",overflow:"auto",border:"1px solid",borderColor:"divider",borderRadius:1,p:{xs:2,sm:3},backgroundColor:"#fff",fontFamily:'"나눔명조", serif',fontSize:{xs:"0.9rem",sm:"1rem"},lineHeight:1.8,color:"text.primary","& h2":{color:"primary.main",fontSize:{xs:"1.1rem",sm:"1.2rem"},fontWeight:600,mt:3,mb:2,"&:first-of-type":{mt:0}},"& blockquote":{borderLeft:"4px solid",borderColor:"primary.light",bgcolor:"grey.50",px:{xs:1,sm:2},py:{xs:.5,sm:1},my:{xs:1,sm:2}},"& p":{my:{xs:1,sm:1.5}}},children:p?(0,r.jsx)("textarea",{value:k,onChange:e=>C(e.target.value),style:{width:"100%",height:"100%",padding:"1rem",fontSize:"1rem",lineHeight:"1.8",fontFamily:'"나눔명조", serif',resize:"none",border:"none",outline:"none",backgroundColor:"transparent"}}):(0,r.jsx)(a.Z,{sx:{height:"100%",overflow:"auto"},dangerouslySetInnerHTML:{__html:(e=>{let t=e.split(/\n\s*\n/),n=0,r="";return t.forEach(e=>{let t=e.split(/([,.])/g).map(e=>e.trim()).filter(e=>e.length>0),s="";for(let e=0;e<t.length;e+=2){let r=t[e]+(t[e+1]||""),i=n===P?"background-color: #ffeb3b;":"",a=r.replace(/## (.*)/g,'<h2 style="color: #1976d2; font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 1rem;">$1</h2>').replace(/\*\*(.*?)\*\*/g,'<strong style="font-weight: 600;">$1</strong>').replace(/\*(.*?)\*/g,'<em style="color: #666;">$1</em>').replace(/> (.*)/g,'<blockquote style="border-left: 4px solid #90caf9; padding-left: 1rem; margin: 1rem 0; background-color: #f5f5f5;"><p style="margin: 0.5rem 0;">$1</p></blockquote>');s+='<span data-sentence-index="'.concat(n,'" style="').concat(i,'">').concat(a,"</span> "),n++}r+='<p style="margin: 1rem 0;">'.concat(s.trim(),"</p>")}),r})(k)}})}),(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",gap:{xs:1,sm:2},mt:2},children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:.5},width:{xs:"100%",sm:"auto"}},children:[(0,r.jsx)(d.Z,{variant:"contained",size:"small",onClick:p?()=>{f(!1),R(!1),i(k)}:()=>{f(!0),R(!0),n()},sx:{minWidth:{xs:"100%",sm:"80px"},height:{xs:36,sm:40}},children:p?"수정완료":"수정하기"}),(0,r.jsx)(d.Z,{variant:"outlined",size:"small",onClick:o,sx:{minWidth:{xs:"100%",sm:"80px"},height:{xs:36,sm:40}},children:"출력하기"}),(0,r.jsx)(d.Z,{variant:"outlined",size:"small",onClick:l,sx:{minWidth:{xs:"100%",sm:"80px"},height:{xs:36,sm:40}},children:"Word저장"}),(0,r.jsxs)(a.Z,{sx:{ml:{xs:0,sm:3},mt:{xs:1,sm:0},display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},gap:{xs:1,sm:.5}},children:[!U&&(0,r.jsxs)(u.Z,{size:"small",sx:{minWidth:{xs:"100%",sm:120},height:{xs:36,sm:40}},children:[(0,r.jsx)(m.Z,{id:"tts-select-label",children:"음성(TTS)"}),(0,r.jsxs)(h.Z,{labelId:"tts-select-label",value:L,onChange:e=>B(e.target.value),size:"small",label:"음성(TTS)",children:[(0,r.jsx)(x.Z,{value:"web",children:"Web Speech API"}),(0,r.jsx)(x.Z,{value:"microsoft",children:"Microsoft Edge TTS"}),(0,r.jsx)(x.Z,{value:"google",children:"Google Translate TTS"})]})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",justifyContent:{xs:"center",sm:"flex-start"},gap:.5},children:[(0,r.jsx)(y.Z,{title:D?"일시정지":"TTS 재생",children:(0,r.jsx)(v.Z,{onClick:()=>{if(!z){alert("이 브라우저는 음성 합성을 지원하지 않습니다.");return}if(D){try{U?(Q.current=Date.now(),H.current=P,z.cancel()):z.pause(),$.current=!0,I(!1)}catch(e){console.error("TTS 일시정지 중 오류:",e)}return}if($.current){$.current=!1,I(!0),H.current>=0&&et(V.current,H.current);return}en();let e=ee(k);V.current=e,H.current=-1,I(!0),et(e,0)},color:D?"primary":"default",size:"small",children:D?(0,r.jsx)(w.Z,{}):(0,r.jsx)(j.Z,{})})}),(0,r.jsx)(y.Z,{title:"TTS 중지",children:(0,r.jsx)(v.Z,{onClick:()=>{if(z)try{console.log("TTS 중지"),z.cancel(),en(),V.current=[]}catch(e){console.error("TTS 중지 오류:",e),en(),V.current=[]}},color:"default",size:"small",children:(0,r.jsx)(Z.Z,{})})})]})]}),(0,r.jsxs)(a.Z,{sx:{ml:{xs:0,sm:2},mt:{xs:1,sm:0},display:"flex",justifyContent:{xs:"center",sm:"flex-start"},alignItems:"center",gap:.5},children:[(0,r.jsx)(y.Z,{title:W?"녹음 중지":"녹음 시작",children:(0,r.jsx)(v.Z,{onClick:W?()=>{M.current&&W&&(M.current.stop(),M.current.stream.getTracks().forEach(e=>e.stop()),N(!1))}:es,color:W?"error":"default",size:"small",children:W?(0,r.jsx)(b.Z,{}):(0,r.jsx)(S.Z,{})})}),_&&(0,r.jsx)(y.Z,{title:"녹음 파일 저장",children:(0,r.jsx)(v.Z,{onClick:()=>{if(_){let e=URL.createObjectURL(_),t=document.createElement("a");t.href=e,t.download="기도문_녹음_".concat(new Date().toISOString().slice(0,19).replace(/:/g,"-"),".wav"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)}},color:"primary",size:"small",children:(0,r.jsx)(T.Z,{})})})]})]}),(0,r.jsx)(d.Z,{variant:"contained",color:"primary",size:"small",onClick:g,sx:{minWidth:{xs:"100%",sm:"100px"},height:{xs:36,sm:40},mt:{xs:1,sm:0}},children:"기도문 저장"})]})]})}var C=n(6433);async function D(e,t){let n=new C.ZP({apiKey:e,dangerouslyAllowBrowser:!0}),r="\n[역할]: 당신은 숙련된 목회자입니다. \n\n[지시]: 예배용 기도문을 마크다운 형식으로 작성해야 합니다.\n\n[파라미터]:\n- 예배종류: ".concat(t.serviceType,"\n- 기도순서구조: ").concat(t.usePrayerStructure?"사용":"미사용","\n- 스타일: ").concat(t.style,"\n- 대상자: ").concat(t.audience,"\n- 특이사항: ").concat(t.specialNotes,"\n- 기도문 길이: ").concat(t.length,"분\n\n[파라미터 적용]:\n1. 반드시 기도문의 작성은 예배종류(").concat(t.serviceType,"), 스타일(").concat(t.style,"), 대상자(").concat(t.audience,")에 맞도록 작성한다.\n2. 기도순서구조: ").concat(t.usePrayerStructure?"사용":"미사용"," 사용 시 아래 순서에 따라 작성한다.\n  예) 찬양→회개→감사→중보(나라, 교회, 성도, 다음 세대)→간구(성도, 선교, 지체, 중직자, 교역자, 설교)→결단\n3. 반드시 기도문 길이( ").concat(t.length,"분)는 아래와 같은 길이에 맞도록 작성한다.\n  예) 1분: 300자, 2분: 600자, 3분: 900자, 4분: 1200자, 5분: 1500자, 6분: 1800자, 7분: 2100자\n  - 중보와 간구는 다른 기도 순서보다 3~5배 정도로 길게 기도문 길이를 조절한다.\n4. 특이사항: ").concat(t.specialNotes,' 특이사항을 내용에 맞게 중보 또는 간구에 포함하여 기도문을 작성한다.\n\n[요구사항]:\n- 한국적 정서를 반영하여 경건하고, 존경과 겸손이 느껴지는 표현을 사용한다. \n- 성경구절을 일부만 인용하여 기도가 하나님의 말씀에 근거하여 작성한다.\n- 성경적 언어(예: "주께서 인도하시나이다", "주의 은혜 안에 거하나이다") 적극 활용한다. \n- 찬양, 회개, 감사, 중보, 간구, 결단의 흐름을 자연스럽게 연결한다. \n- 기도문에 여호와의 증인, 신천지, 동일교, 구원파 등의 이단적 사상이나 표현을 일절 포함하지 않습니다.\n- 각 기도 순서별로 2~4개 이상 문장 이상 구성하고, 너무 복잡하거나 장황하지 않으며, 은혜롭고 간결하게 작성한다. \n- 전통적 예배 문맥을 고려해 존댓말을 사용한다. \n- 하나님의 위대하심과 은혜를 강조한다. \n- 성도들에게 위로와 도전을 주는 표현 추가한다. \n- 반드시 기도문은 낭독하기 편한 형태로 작성한다.\n- 기도문의 제일 위에 기도문의 내용에 부합하는 성경구절(개역개정판)을 포함하되 따움표("")로 구분한다.\n- 기도문의 마지막은 반드시 "이 모든 말씀, 우리 구주 예수 그리스도의 이름으로 기도드립니다. 아멘."으로 끝내주세요.\n\n[마크다운 형식 요구사항]:\n1. 각 기도 섹션(찬양, 회개, 감사 등)은 기도문에 출력하지 않는다.\n2. 각 섹션은 빈 줄로 구분한다.\n3. HTML 태그를 사용하지 않는다.\n4. 순수 마크다운 문법만 사용한다.\n\n');try{return(await n.chat.completions.create({messages:[{role:"user",content:r}],model:t.model})).choices[0].message.content||"기도문 생성에 실패했습니다."}catch(e){throw console.error("Error generating prayer:",e),Error("기도문 생성 중 오류가 발생했습니다.")}}var I=n(257);async function z(e){try{let t=await fetch("https://texttospeech.googleapis.com/v1/text:synthesize",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(I.env.GOOGLE_CLOUD_API_KEY)},body:JSON.stringify({input:{text:e},voice:{languageCode:"ko-KR",name:"ko-KR-Neural2-D"},audioConfig:{audioEncoding:"MP3"}})});if(!t.ok)throw Error("음성 변환에 실패했습니다.");return(await t.json()).audioContent}catch(e){throw console.error("Error in text to speech:",e),Error("음성 변환 중 오류가 발생했습니다.")}}var E=n(432),P=n(12);async function A(e){let{prayer:t,serviceType:n,style:r,audience:s,length:i}=e,a=new E.BBB({sections:[{children:[new E.nvN({children:[new E.hal({text:"\uD83D\uDCC4 기도문",bold:!0,size:28}),new E.hal("\n\n"),new E.hal({text:"예배 종류: ".concat(n,"\n스타일: ").concat(r,"\n대상자: ").concat(s,"\n길이: ").concat(i,"분\n\n"),size:20}),new E.hal({text:t,size:24})]})]}]}),o=await E.UDs.toBlob(a);if("showSaveFilePicker"in window){let e=await window.showSaveFilePicker({suggestedName:"기도문.docx",types:[{description:"Word Document",accept:{"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]}}]}),t=await e.createWritable();await t.write(o),await t.close()}else(0,P.saveAs)(o,"기도문.docx");return!0}function L(e){try{{let t=JSON.stringify(e);localStorage.setItem("prayerSettings",t)}}catch(e){console.error("설정 저장 중 오류 발생:",e)}}function B(e){{let t=localStorage.getItem("savedPrayers"),n=t?JSON.parse(t):[],r=n.findIndex(t=>new Date(t.date).toLocaleDateString()===new Date(e.date).toLocaleDateString()&&t.serviceType===e.serviceType&&t.style===e.style&&t.audience===e.audience&&t.length===e.length);-1!==r?n[r].content=e.content:n.push(e),localStorage.setItem("savedPrayers",JSON.stringify(n))}}var O=n(3392),R=n(9507),W=n(7468),N=n(9026);function _(e){let{open:t,title:n,message:s,confirmText:i="예",cancelText:a="아니오",onConfirm:o,onCancel:c}=e;return(0,r.jsxs)(O.Z,{open:t,onClose:c,PaperProps:{sx:{width:"100%",maxWidth:400,borderRadius:2}},children:[(0,r.jsx)(R.Z,{sx:{bgcolor:"primary.main",color:"white",py:1.5},children:n}),(0,r.jsx)(W.Z,{sx:{mt:2},children:(0,r.jsx)(l.Z,{children:s})}),(0,r.jsxs)(N.Z,{sx:{px:3,pb:2},children:[(0,r.jsx)(d.Z,{onClick:c,variant:"outlined",color:"inherit",children:a}),(0,r.jsx)(d.Z,{onClick:o,variant:"contained",color:"primary",autoFocus:!0,children:i})]})]})}function K(){let[e,t]=(0,s.useState)(""),[n,y]=(0,s.useState)("gpt-4.1"),[v,j]=(0,s.useState)("sunday"),[w,Z]=(0,s.useState)("traditional"),[S,b]=(0,s.useState)("believer"),[T,C]=(0,s.useState)(!0),[I,E]=(0,s.useState)(""),[P,O]=(0,s.useState)(4),[R,W]=(0,s.useState)(""),[N,K]=(0,s.useState)(""),[M,q]=(0,s.useState)(""),[U,J]=(0,s.useState)(""),[F,G]=(0,s.useState)(!1),[H,$]=(0,s.useState)([]),[V,Y]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)({open:!1,title:"",message:"",confirmAction:()=>{}});(0,s.useEffect)(()=>{let e=function(){try{{let e=localStorage.getItem("prayerSettings");if(e)return JSON.parse(e)}}catch(e){console.error("설정 불러오기 중 오류 발생:",e)}return{apiKey:"",model:"gpt-4.1"}}();e&&(e.apiKey&&t(e.apiKey),e.model&&y(e.model));let n=function(){{let e=localStorage.getItem("savedPrayers");return e?JSON.parse(e):[]}}();n&&n.length>0&&$(n)},[]),(0,s.useEffect)(()=>{(e||n)&&L({apiKey:e,model:n})},[e,n]);let en=async t=>{t.preventDefault(),et({open:!0,title:"기도문 생성",message:"입력하신 내용으로 기도문을 생성하시겠습니까?",confirmAction:async()=>{et(e=>({...e,open:!1})),q(""),G(!0);try{let t=await D(e,{serviceType:v,usePrayerStructure:T,style:w,audience:S,specialNotes:I,length:P,model:n});W(t),J("기도문이 생성되었습니다."),setTimeout(()=>J(""),3e3)}catch(e){q(e instanceof Error?e.message:"기도문 생성 중 오류가 발생했습니다.")}finally{G(!1)}}})},er=async()=>{try{let e=await z(R);!function(e){new Audio("data:audio/mp3;base64,".concat(e)).play()}(e)}catch(e){q(e instanceof Error?e.message:"음성 변환 중 오류가 발생했습니다.")}},es=async()=>{try{await A({prayer:R,serviceType:v,style:w,audience:S,length:P})&&(J("Word 파일이 저장되었습니다."),setTimeout(()=>J(""),3e3))}catch(e){q("Word 파일 저장 중 오류가 발생했습니다."),setTimeout(()=>q(""),3e3)}},ei=e=>{et({open:!0,title:"기도문 삭제",message:"선택한 기도문을 삭제하시겠습니까?",confirmAction:()=>{!function(e){{let t=localStorage.getItem("savedPrayers");if(t){let n=JSON.parse(t).filter(t=>t.id!==e);localStorage.setItem("savedPrayers",JSON.stringify(n))}}}(e),$(t=>t.filter(t=>t.id!==e)),J("기도문이 삭제되었습니다."),setTimeout(()=>J(""),3e3),et(e=>({...e,open:!1}))}})};return(0,r.jsxs)(i.Z,{maxWidth:"lg",sx:{py:4},children:[(0,r.jsx)(a.Z,{sx:{position:"fixed",top:0,right:0,padding:"4px 8px",fontSize:"0.8rem",color:"text.secondary",backgroundColor:"background.paper",borderBottomLeftRadius:1,boxShadow:1,zIndex:1e3},children:"ver 1.0.2"}),(0,r.jsxs)(o.Z,{elevation:3,sx:{my:{xs:2,sm:3,md:4},p:{xs:2,sm:3,md:4}},children:[(0,r.jsx)(l.Z,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"}},children:"기도문 작성"}),(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},alignItems:{xs:"stretch",sm:"center"}},children:[(0,r.jsx)(c.Z,{sx:{flex:1,"& .MuiInputBase-root":{height:{xs:36,sm:40}}},label:"API Key",type:"password",value:e,onChange:e=>t(e.target.value),margin:"normal",required:!0,size:"small"}),(0,r.jsx)(d.Z,{variant:"contained",color:"primary",onClick:()=>{e&&et({open:!0,title:"API Key 저장",message:"API Key를 저장하시겠습니까?",confirmAction:()=>{L({apiKey:e,model:n}),J("API Key가 저장되었습니다."),setTimeout(()=>J(""),3e3),et(e=>({...e,open:!1}))}})},sx:{height:{xs:36,sm:40},mt:{xs:0,sm:"8px"}},children:"저장"}),(0,r.jsxs)(u.Z,{sx:{minWidth:{xs:"100%",sm:200},"& .MuiInputBase-root":{height:{xs:36,sm:40}}},margin:"normal",size:"small",children:[(0,r.jsx)(m.Z,{children:"API 모델"}),(0,r.jsxs)(h.Z,{value:n,label:"API 모델",onChange:e=>y(e.target.value),required:!0,children:[(0,r.jsx)(x.Z,{value:"gpt-4.1",children:"GPT-4.1"}),(0,r.jsx)(x.Z,{value:"gpt-4.1-mini",children:"GPT-4.1-mini"})]})]})]}),U&&(0,r.jsx)(g.Z,{severity:"success",sx:{mt:2},children:U})]}),(0,r.jsxs)(o.Z,{elevation:3,sx:{my:4,p:4},children:[(0,r.jsx)(l.Z,{variant:"h5",component:"h2",gutterBottom:!0,children:"기도문 생성"}),(0,r.jsxs)(a.Z,{component:"form",onSubmit:en,children:[M&&(0,r.jsx)(g.Z,{severity:"error",sx:{mt:2,mb:2},children:M}),(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},mb:2,alignItems:{xs:"stretch",sm:"center"}},children:[(0,r.jsxs)(u.Z,{sx:{flex:1,"& .MuiInputBase-root":{height:{xs:36,sm:40}}},size:"small",children:[(0,r.jsx)(m.Z,{children:"예배 종류"}),(0,r.jsxs)(h.Z,{value:v,label:"예배 종류",onChange:e=>j(e.target.value),required:!0,children:[(0,r.jsx)(x.Z,{value:"sunday",children:"주일예배"}),(0,r.jsx)(x.Z,{value:"dawn",children:"새벽예배"}),(0,r.jsx)(x.Z,{value:"afternoon",children:"오후예배"}),(0,r.jsx)(x.Z,{value:"wednesday",children:"수요예배"}),(0,r.jsx)(x.Z,{value:"friday",children:"금요기도회"}),(0,r.jsx)(x.Z,{value:"christmas",children:"성탄절"}),(0,r.jsx)(x.Z,{value:"easter",children:"부활절"}),(0,r.jsx)(x.Z,{value:"thanksgiving",children:"추수감사절"})]})]}),(0,r.jsxs)(u.Z,{sx:{flex:1,"& .MuiInputBase-root":{height:{xs:36,sm:40}}},size:"small",children:[(0,r.jsx)(m.Z,{children:"스타일"}),(0,r.jsxs)(h.Z,{value:w,label:"스타일",onChange:e=>Z(e.target.value),required:!0,children:[(0,r.jsx)(x.Z,{value:"traditional",children:"전통적"}),(0,r.jsx)(x.Z,{value:"modern",children:"현대적"}),(0,r.jsx)(x.Z,{value:"literary",children:"문학적"}),(0,r.jsx)(x.Z,{value:"emotional",children:"감성적"}),(0,r.jsx)(x.Z,{value:"creative",children:"창조적"})]})]}),(0,r.jsxs)(u.Z,{sx:{flex:1,"& .MuiInputBase-root":{height:{xs:36,sm:40}}},size:"small",children:[(0,r.jsx)(m.Z,{children:"대상자"}),(0,r.jsxs)(h.Z,{value:S,label:"대상자",onChange:e=>b(e.target.value),required:!0,children:[(0,r.jsx)(x.Z,{value:"believer",children:"성도"}),(0,r.jsx)(x.Z,{value:"children",children:"어린이"}),(0,r.jsx)(x.Z,{value:"youth",children:"청소년"}),(0,r.jsx)(x.Z,{value:"youngAdult",children:"청년"}),(0,r.jsx)(x.Z,{value:"adult",children:"장년"}),(0,r.jsx)(x.Z,{value:"patient",children:"환자"}),(0,r.jsx)(x.Z,{value:"funeral",children:"장례"}),(0,r.jsx)(x.Z,{value:"wedding",children:"결혼"}),(0,r.jsx)(x.Z,{value:"business",children:"개업"}),(0,r.jsx)(x.Z,{value:"hospital",children:"병원"})]})]}),(0,r.jsxs)(u.Z,{sx:{width:90},children:[(0,r.jsx)(l.Z,{variant:"caption",gutterBottom:!0,children:"기도 순서 구조"}),(0,r.jsx)(a.Z,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(p.Z,{checked:T,onChange:e=>C(e.target.checked),size:"small"})})]}),(0,r.jsxs)(u.Z,{sx:{width:90},children:[(0,r.jsx)(l.Z,{variant:"caption",gutterBottom:!0,children:"기도문 길이(분)"}),(0,r.jsx)(f.ZP,{value:P,onChange:(e,t)=>O(t),min:1,max:7,step:1,marks:!0,valueLabelDisplay:"auto",size:"small"})]}),(0,r.jsx)(d.Z,{type:"submit",variant:"contained",disabled:F,size:"medium",sx:{height:{xs:36,sm:40},whiteSpace:"nowrap",width:{xs:"100%",sm:"auto"}},children:F?"생성 중...":"기도문 생성"})]}),(0,r.jsx)(c.Z,{fullWidth:!0,label:"특이 사항",value:I,onChange:e=>E(e.target.value),margin:"normal",multiline:!0,rows:3})]})]}),R&&(0,r.jsxs)(o.Z,{elevation:3,sx:{my:4,p:4},children:[(0,r.jsx)(l.Z,{variant:"h5",component:"h2",gutterBottom:!0,children:"기도문 출력/수정"}),(0,r.jsx)(k,{prayer:R,onEdit:()=>{},onSave:e=>{W(e)},onPrint:()=>{!function(e){let{prayer:t,serviceType:n,style:r,audience:s,length:i}=e,a=new Date().toLocaleDateString(),o="".concat(a," | ").concat({sunday:"주일예배",dawn:"새벽예배",afternoon:"오후예배",wednesday:"수요예배",friday:"금요기도회",christmas:"성탄절",easter:"부활절",thanksgiving:"추수감사절"}[n]," | ").concat({traditional:"전통적",modern:"현대적",literary:"문학적"}[r]," | ").concat({believer:"성도",pastor:"목회자",elder:"장로",children:"어린이",youth:"청소년",youngAdult:"청년",adult:"장년"}[s]," | ").concat(i,"분"),l='\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="UTF-8">\n      <title>'.concat(o,'</title>\n      <style>\n        @media print {\n          @page {\n            margin: 2.54cm;\n          }\n        }\n        body {\n          font-family: "바탕", Batang, serif;\n          line-height: 1.8;\n          margin: 0;\n          padding: 20px;\n        }\n        .filename {\n          font-size: 14pt;\n          margin-bottom: 30px;\n          text-align: center;\n          border-bottom: 1px solid #000;\n          padding-bottom: 10px;\n        }\n        .prayer {\n          white-space: pre-wrap;\n          font-size: 12pt;\n        }\n      </style>\n    </head>\n    <body>\n      <div class="filename">').concat(o,'</div>\n      <div class="prayer">').concat(t,"</div>\n    </body>\n    </html>\n  "),c=window.open("","_blank","width=800,height=600");c&&(c.document.write(l),c.document.close(),c.onload=function(){c.print()})}({prayer:R,serviceType:v,style:w,audience:S,length:P})},onSaveToWord:es,onTTS:er,onSaveToPrayerList:()=>{let e=H.find(e=>new Date(e.date).toLocaleDateString()===new Date().toLocaleDateString()&&e.serviceType===v&&e.style===w&&e.audience===S&&e.length===P),t={id:e?e.id:new Date().getTime().toString(),date:e?e.date:new Date().toISOString(),serviceType:v,style:w,audience:S,length:P,content:R};e?et({open:!0,title:"기도문 수정",message:"기존 기도문을 수정하시겠습니까?",confirmAction:()=>{B(t),$(n=>n.map(n=>n.id===e.id?t:n)),J("기도문이 수정되었습니다."),setTimeout(()=>J(""),3e3),et(e=>({...e,open:!1}))}}):et({open:!0,title:"기도문 저장",message:"현재 기도문을 저장하시겠습니까?",confirmAction:()=>{B(t),$(e=>[t,...e]),J("기도문이 저장되었습니다."),setTimeout(()=>J(""),3e3),et(e=>({...e,open:!1}))}})}})]}),H.length>0&&(0,r.jsxs)(o.Z,{elevation:3,sx:{my:4,p:4},children:[(0,r.jsx)(l.Z,{variant:"h5",component:"h2",gutterBottom:!0,children:"저장된 기도문 관리"}),(0,r.jsx)(a.Z,{children:H.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>(0,r.jsx)(o.Z,{elevation:1,sx:{p:.1,mb:.1,"&:last-child":{mb:0}},children:(0,r.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(l.Z,{variant:"subtitle2",onClick:()=>{W(e.content),j(e.serviceType),Z(e.style),b(e.audience),O(e.length),window.scrollTo({top:0,behavior:"smooth"})},sx:{cursor:"pointer","&:hover":{color:"primary.main",textDecoration:"underline"},flex:1,mr:2},children:[new Date(e.date).toLocaleDateString()," | ",{sunday:"주일예배",dawn:"새벽예배",afternoon:"오후예배",wednesday:"수요예배",friday:"금요기도회",christmas:"성탄절",easter:"부활절",thanksgiving:"추수감사절"}[e.serviceType]," | ",{traditional:"전통적",modern:"현대적",literary:"문학적",emotional:"감성적",creative:"창조적"}[e.style]," | ",{believer:"성도",children:"어린이",youth:"청소년",youngAdult:"청년",patient:"환자",funeral:"장례",wedding:"결혼",business:"개업",hospital:"병원"}[e.audience]," | ",e.length,"분"]}),(0,r.jsx)(d.Z,{size:"small",variant:"outlined",color:"error",onClick:()=>ei(e.id),children:"삭제"})]})},e.id))})]}),(0,r.jsx)(_,{open:ee.open,title:ee.title,message:ee.message,onConfirm:ee.confirmAction,onCancel:()=>et(e=>({...e,open:!1}))})]})}}},function(e){e.O(0,[800,498,971,117,744],function(){return e(e.s=877)}),_N_E=e.O()}]);